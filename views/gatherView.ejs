<!-- gatherShowDetail.ejs ==> gatherView.ejs -->
<!-- STYLESHEET -->
<link rel="stylesheet" href="/css/boardPost.css">

<!-- SECTION -->
<section>
    <div class="board-post-section">
        <div class="post-section">
            <div class="post-category-box">
                <ul class="post-category">
                    <li>
                        <span>
                            <a href="/gather">ë°¥ëª¨ì„</a>
                        </span>
                    </li>
                </ul>
            </div>
            <div class="post-title">
                <!-- ê¸€ ì œëª© ë¶ˆëŸ¬ì˜¤ê¸° -->
                <%= gatherData.name %>
            </div>
            <div class="post-info-box">
                <ul class="post-info-first">
                    <li class="writer-name">
                        <!-- ì‘ì„±ì ì´ë¦„ ë¶ˆëŸ¬ì˜¤ê¸° -->
                        ì‘ì„±ì
                        <%= gatherData.leader_id %>
                    </li>
                    <li class="write-date">
                        ê²Œì‹œì¼
                        <!-- ì‘ì„±ì¼ ë¶ˆëŸ¬ì˜¤ê¸° -->
                        <%= gatherData.createdAt.toISOString().slice(0,10) %>
                    </li>
                    <li class="write-date">
                        ë§ˆê°ì¼
                        <!-- deadline ë˜ëŠ” due date -->
                        <!-- ì‘ì„±ì¼ ë¶ˆëŸ¬ì˜¤ê¸° -->
                        <%= gatherData.deadline.toISOString().slice(0,10) %>
                    </li>
                </ul>
                <ul class="post-info-second">
                    <li class="post-views">
                        ì¡°íšŒ
                        <span>
                            <!-- ì¡°íšŒìˆ˜ columnë§Œë“¤ê¸° -->
                            <%= gatherData.viewCount %>
                        </span>
                    </li>
                    <li class="post-views">
                        ì´ì¸ì›ìˆ˜
                        <span>
                            <!-- ì¡°íšŒìˆ˜ columnë§Œë“¤ê¸° -->
                            <%= gatherData.maximumHeadCount %>
                        </span>
                    </li>
                    <li class="post-views">
                        í˜„ì¬ì¸ì›ìˆ˜
                        <span>
                            <!-- ì¡°íšŒìˆ˜ columnë§Œë“¤ê¸° -->
                            <%= gatherData.currentHeadCount %>
                        </span>
                    </li>
                </ul>
            </div>
            <div>
                <!-- ìœ ì €ê°€ ì‘ì„±ìë©´ [ìˆ˜ì •/ì‚­ì œ] ë²„íŠ¼ -->
                <% if (typeof user != 'undefined' && user.mem_id == gatherData.leader_id) { %>
                    <a href='/gather/update?no=<%= gatherData.gathering_id %>'>[í¸ì§‘]</a>
                    <a href='/gather/delete?no=<%= gatherData.gathering_id %>'>[ì‚­ì œ]</a>
                <% } %>
                
                <!-- ìœ ì €ê°€ ëª¨ì„ì›ì´ë©´ [íƒˆí‡´] ë²„íŠ¼  -->
                whoê°’<%= who %>
                <!-- ìœ ì €ê°€ ëª¨ì„ì›ì´ë©´ [íƒˆí‡´] ë²„íŠ¼  -->
                <% switch(who){ 
                    case 0: %> 
                        <a href='/gather/update?no=<%= gatherData.gathering_id %>'>[í¸ì§‘]</a>
                        <a href='/gather/delete?no=<%= gatherData.gathering_id %>'>[ì‚­ì œ]</a>
                        <% break; %>
                    <% case 1: %>   
                    ëª¨ì„ì›
                        <a href="">[íƒˆí‡´]</a>
                        <% break; %>
                    <% case 2: %>   
                    ì‹ ì²­í•œ ì‚¬ëŒ
                        
                        <% break; %>
                    <% case 3: %> 
                    ê±°ì ˆë‹¹í•œ ì‚¬ëŒ
                    <% default: %>
                        <% break; %>
                <% } %>
            </div>
            <div class="post-content">
                1) ì´ì¸ì›<br>2) í˜„ì¬ì¸ì›<br> 3) ì§€ì—­<br>4) íƒë°©í•  ë§›ì§‘<br>
                <!-- ê¸€ ë‚´ìš© ë¶ˆëŸ¬ì˜¤ê¸° -->
                <%= gatherData.description %>
            </div>
            <!-- ì¶”ì²œ, ìŠ¤í¬ë©í•˜ê¸° -->
            <div class="upscrap-box">
                <button class="up-bt">
                    ğŸ‘<br>
                    ê°™ì´ë¨¹ì–´ìš”
                    <!-- ë¡œê·¸ì¸ ìƒíƒœì¼ ë•Œ ë²„íŠ¼ ëˆ„ë¥´ë©´ ì¶”ì²œ, 
                         ë¹„ ë¡œê·¸ì¸ ìƒíƒœë©´ ë¡œê·¸ì¸ ì–´ì©Œêµ¬ ì°½ ë„ìš°ê¸° -->
                </button>
                <button class="scrap-bt">
                    â­<br>
                    ëª©ë¡
                    <!-- ë¡œê·¸ì¸ ìƒíƒœì¼ ë•Œ ë²„íŠ¼ ëˆ„ë¥´ë©´ ìŠ¤í¬ë©, 
                         ë¹„ ë¡œê·¸ì¸ ìƒíƒœë©´ ë¡œê·¸ì¸ ì–´ì©Œêµ¬ ì°½ ë„ìš°ê¸° -->
                </button>
            </div>
        </div>
    </div>


    <!-- ì´ ì•„ë˜ëŠ” ë°±ì—”ë“œ í…ŒìŠ¤íŠ¸ìš© -->
    <div id="example">
        switch(who){
            case ISLEADER:  
            console.log('switch');
                // console.log('switchë™ì‘');
                obj.memberList = await searchParticipants(undefined, [ISLEADER, ISMEMBER], _gatherId, undefined);
                // í•´ë‹¹ ëª¨ì„ì˜ ê°€ì…ì‹ ì²­í•œ ìœ ì € ëª©ë¡ ì €ì¥
                obj.applicantList = await searchParticipants(undefined, ISAPPLYING, _gatherId, undefined);
            case ISMEMBER:
                console.log('switch');
                // ëª¨ì„ì› ëª©ë¡
                obj.memberList = await searchParticipants(undefined, [ISLEADER, ISMEMBER], _gatherId, undefined);
                break;
            case ISAPPLYING:
                obj.statusInfo = who;
                // âœ…ë©”ì‹œì§€: [] | ìƒíƒœ [ì‹ ì²­ì¤‘] | ì‹ ì²­ì¼ì: []
                //âš ï¸ì§€ì›ìëŠ” ë²„íŠ¼ í´ë¦­í•˜ë©´ ì´ë¯¸ ì‹ ì²­í–ˆì–´ìš”!
                // break;
            case ISREFUSED:
                obj.statusInfo = who;
                // âœ…ë©”ì‹œì§€: [] | ìƒíƒœ [ê±°ì ˆ] | [ì¬ì‹ ì²­] | ì‹ ì²­ì¼ì: []
            default: //ISNOTMEMBER
                break;
        }
    </div>
    <!-- user.mem_id==leader_idì¼ ë•Œë§Œ -->
    <div class="board-post-section">
        <!-- <a href="/gather/acceptMember?no=14&aplctId=pink" target="blankifr">[ìˆ˜ë½]</a> -->
        <a href="/gather/acceptMember?no=<data.gathering_id>&aplctId=<applicantList.mem_id>" target="blankifr">[ìˆ˜ë½]</a>
         <!-- ëª¨ì„ no, aplctId -->
        <!-- <a href="/gather/refuseMember?no=14&aplctId=pink" target="blankifr">[ê±°ì ˆ]</a> -->
        <a href="/gather/refuseMember?no=<data.gathering_id>&aplctId=<applicantList.mem_id>" target="blankifr">[ê±°ì ˆ]</a>
        <!--  ëª¨ì„ no, aplctId -->
    </div>
    <iframe name="blankifr" style="display:none;"></iframe> 
    <!-- ã„´ í™”ë©´ ë³€ê²½ ë°©ì§€ -->
</section>