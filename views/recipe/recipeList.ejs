<!-- STYLESHEET -->
<link rel="stylesheet" href="/css/recipe/recipeList.css">

<!--SECTION-->
<section>

    <!-- Ï†ÑÏ≤¥ÌãÄ -->
    <div class="recipeList-section">

        <!-- ÌÉÄÏù¥ÌãÄÍ≥º Î∞ëÏ§Ñ -->
        <div class="recipeList-list">

            <!-- ÌÉÄÏù¥ÌãÄ --><!-- Î∞ëÏ§ÑÎã¨Î¶∞ div -->
            <div class="recipeList-main">
                <a href="/recipe/list">Î†àÏãúÌîº Ï†ÑÏ≤¥Î¶¨Ïä§Ìä∏</a>
            </div>

            <!-- ÌÉúÍ∑∏ Ïπ¥ÌÖåÍ≥†Î¶¨ -->
            <div class="recipeList-sub">
				<ul class="recipeList-sub-list">
                    <% tagNameList.forEach((name, index)=> { %> 
                        <li class="recipeList-sub-name">
                            <% if(name===curTag){ %>
                                <a href="/recipe/list/<%= name %>" style="font-weight: 800;">#<%= name %></a>
                            <%} else { %>
                                <a href="/recipe/list/<%= name %>">#<%= name %></a>
                            <% } %>
                            <!-- <%= tagIdList[index]%> Í∞Ä tagid -->
                        </li>
                    <% }) %>
                    <!-- <%= (curTag)? '/' + curTag : 'üê∞' %>/ -->
				</ul>
			</div>

        </div>

        <!-- Î†àÏãúÌîº ÏûëÏÑ± Î≤ÑÌäº -->
        <div class="write-box">
			<% if(typeof user != "undefined"){ %>
				<!-- Î°úÍ∑∏Ïù∏ ÏÉÅÌÉúÏùº Ïãú -->
				<a href="/recipe/write">
					<button class="write-button">
						Î†àÏãúÌîº ÏûëÏÑ±ÌïòÍ∏∞
					</button>
				</a>
			<% } else{ %>
				<!-- ÎπÑÎ°úÍ∑∏Ïù∏ -->
				<button class="write-button" onclick="alert('Î°úÍ∑∏Ïù∏ ÌõÑ Ïù¥Ïö© Í∞ÄÎä•')">
					Î†àÏãúÌîº ÏûëÏÑ±ÌïòÍ∏∞
				</button>
			<% } %>
		</div>

        <!-- Î†àÏãúÌîº Îã¥Îäî div -->
        <div class="recipeList-content">
            
            <!-- Î†àÏãúÌîº ÌïòÎÇò, 3Î≤à Î∞òÎ≥µÌïòÍ∏∞ -->
            <% dataList.forEach((data, index)=>{ %>
                <div class="recipe-box">

                    <!-- Ïù¥ÎØ∏ÏßÄÏôÄ ÌÉúÍ∑∏ Î∞ïÏä§ -->
                    <div class="recipe-imgntag">

                        <!-- ÎåÄÌëúÏù¥ÎØ∏ÏßÄ Î∞ïÏä§ -->
                        <div class="recipe-img-box">
                            <!-- ÎåÄÌëúÏù¥ÎØ∏ÏßÄ Î∂àÎü¨Ïò§Í∏∞ -->
                            <img src="/images/recipeDefault.png">
                        </div>

                        <!-- ÌÉúÍ∑∏ Î∞ïÏä§ -->
                        <div class="recipe-tag-box">
                            <!-- ÌÉúÍ∑∏ Î∂àÎü¨Ïò§Í∏∞ -->
                            <!-- checkbox Í∞í Ï†ÑÎ∂Ä Î∂àÎü¨Ïò§Í∏∞ -->
                            <!-- ÌòÑÏû¨ req.params.tagÎûë Í∞ôÏúºÎ©¥ bold -->
                            <% tagList[index].tags.forEach((tag, index2)=>{ %>
                                <span> #<%=tag%></span>
                            <% }) %>
                        </div>

                    </div>

                    <!-- Í∏Ä Î∞ïÏä§ -->
                    <div class="recipe-con-box">

                        <!-- Ï†úÎ™©Í≥º ÎÇ†Ïßú Î∞ïÏä§ -->
                        <div class="recipe-titlendate">

                            <!-- Ï†úÎ™© Î∞ïÏä§ -->
                            <div class="recipe-title-box">
                                <!-- Ï†úÎ™© Î∂àÎü¨Ïò§Í∏∞ -->
                                <%= data.title %>
                            </div>

                            <!-- ÎÇ†Ïßú Î∞ïÏä§ -->
                            <div class="recipe-date-box">
                                <!-- ÎÇ†Ïßú Î∂àÎü¨Ïò§Í∏∞ -->
                                <%= data.createdAt.toISOString().slice(0,4) %>ÎÖÑ
                                <%= data.createdAt.toISOString().slice(5,7) %>Ïõî
                                <%= data.createdAt.toISOString().slice(8,10) %>Ïùº
                            </div>

                        </div>

                        <!-- ÏÜåÍ∞úÍ∏Ä Î∞ïÏä§ -->
                        <div class="recipe-intro-box">
                            <!-- ÏÜåÍ∞úÍ∏Ä Î∂àÎü¨Ïò§Í∏∞ -->
                            <%= data.intro %>
                        </div>

                        <!-- Ïø°ÌÉÄÏûÑ, ÎÇúÏù¥ÎèÑ, ÏûêÏÑ∏ÌûàÎ≥¥Í∏∞ Î∞ïÏä§ -->
                        <div class="time-level-details">

                            <div class="recipe-menu-box">
                                üìëÎ©îÎâ¥ :
                                <div class="recipe-menu-on">
                                    <!-- Ïø°ÌÉÄÏûÑ Î∂àÎü¨Ïò§Í∏∞ -->
                                    <%= data.menu %>
                                </div>
                                ,
                            </div>

                            <div class="recipe-time-box">
                                ‚è±Ô∏èÏø°ÌÉÄÏûÑ ÏïΩ
                                <div class="recipe-time-on">
                                    <!-- Ïø°ÌÉÄÏûÑ Î∂àÎü¨Ïò§Í∏∞ -->
                                    <%= data.cookTime %>
                                </div>
                                Î∂Ñ ,
                            </div>

                            <div class="recipe-level-box">
                                ÎÇúÏù¥ÎèÑ
                                <div class="recipe-level-on">
                                    <%- Array(data.cookLevel + 1).join('‚≠ê') %>
                                </div>
                            </div>

                            <div class="recipe-details-box">
                                <a href="/recipe/view?no=<%= data.recipe_id %>&sort=earliest">ÏûêÏÑ∏Ìûà Î≥¥Í∏∞ ></a>
                            </div>
                        </div>

                    </div>

                </div>
            <% }) %>


            <!-- ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò -->

            <% if (dataList == ''){ %>
                <!-- <ul class="post-list"> -->
                    ÏïÑÏßÅ Î†àÏãúÌîºÍ∞Ä ÏóÜÏñ¥Ïöî. Ìë∏ÎîîÎì§ÏùÑ ÏúÑÌï¥ Î†àÏãúÌîºÎ•º Í≥µÏú†Ìï¥Ï£ºÏÑ∏Ïöî :D
                    ‚ö†Ô∏èÏúÑÏπò Î∞îÍøîÏïºÌï† Í±∞ Í∞ôÏùå. ÏúÑÎ°ú
                <!-- </ul> -->
            <% } else { %>
                <div class="recipe-page-box">
                    <% if (pagination.curSet > 1){ %>
                        /recipe/list/ÌòÑÏû¨ÌÉúÍ∑∏  
                        <div class="prev-set-button"><a href="/recipe/list<%= (curTag)? '/' + curTag : '' %>?pageno=<%= pagination.startPage-1%>&countperpage=10">&lt;&lt;&nbsp; </a></div>
                    <% } %>
                    <% if (pagination.pageNo!=1){ %>    
                        <div class="prev-button"><a href="/recipe/list<%= (curTag)? '/' + curTag : '' %>?pageno=<%= pagination.pageNo-1%>&countperpage=10">&nbsp;Ïù¥Ï†Ñ&nbsp;</a></div>
                    <% } %>
                    <div class="number-button-wrapper">
                        <% for (var i=pagination.startPage; i < pagination.endPage+1; i++){ %>
                            <span class="number-button"> 
                                <% if (pagination.pageNo==i){ %>
                                    <% console.log(i, pagination.pageNo); %>
                                    <a href="/recipe/list<%= (curTag)? '/' + curTag : '' %>?pageno=<%= i %>&countperpage=10" style="font-weight: 800;"><%= i %></a>
                                <% } else{ %>
                                    <a href="/recipe/list<%= (curTag)? '/' + curTag : '' %>?pageno=<%= i %>&countperpage=10"><%= i %></a>
                                <% } %>
                            </span>
                        <% } %>
                    </div>
                    <% if (pagination.pageNo != pagination.totalPage){ %>
                        <div class="next-button"><a href="/recipe/list<%= (curTag)? '/' + curTag : '' %>?pageno=<%= pagination.pageNo+1%>&countperpage=10"> &nbsp;Ïù¥ÌõÑ&nbsp;</a></div>
                    <% }%>
                    <% if (pagination.curSet < pagination.totalSet){ %>
                        <div class="next-set-button"><a href="/recipe/list<%= (curTag)? '/' + curTag : '' %>?pageno=<%= pagination.endPage+1%>&countperpage=10">&nbsp;&gt;&gt;</a></div>
                    <% }%>
                </div>
            <% } %>

        </div>

    </div>

</section>