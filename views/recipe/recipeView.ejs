<!-- STYLESHEET -->
<link rel="stylesheet" href="/css/recipe/recipeView.css">

<!-- SECTION -->
<section>

    <!-- Ï†ÑÏ≤¥ ÌãÄ -->
    <div class="section-box">

        <!-- ÏôºÏ™Ω ÏÇ¨Ïù¥ÎìúÎ∞î, ÏÇ¨Ïã§ÏÉÅ Ïì∏Î™®x -->
        <div class="sidebar-section">
            <div class="sidebar-box-left">
            </div>
        </div>

        <!-- Í∏Ä Î≥¥Ïó¨ÏßÄÎäî Í∞ÄÏö¥Îç∞ ÌôîÎ©¥ div -->
        <div class="recipe-view-section">

            <!-- Í∏Ä Î∂ÄÎ∂Ñ -->
            <div class="post-section">

                <!-- Í∏Ä Ï†úÎ™© Î∂ÄÎ∂Ñ -->
                <div class="post-title">
                    <!-- Í∏Ä Ï†úÎ™© Î∂àÎü¨Ïò§Í∏∞ -->
                    <%= data.title %>
                </div>

                <!-- ÏûëÏÑ±Ïûê ~ ÎåìÍ∏Ä Î∂ÄÎ∂Ñ -->
                <div class="post-info-box">

                    <!-- ÏûëÏÑ±Ïûê Ïù¥Î¶ÑÍ≥º ÎÇ†Ïßú -->
                    <ul class="post-info-first">
                        <li class="writer-name">
                            <!-- ÏûëÏÑ±Ïûê Ïù¥Î¶Ñ Î∂àÎü¨Ïò§Í∏∞ -->
                            <%= data.writer_id %>
                            <!--  operator_id -->
                        </li>
                        <li class="write-date">
                            <!-- ÏûëÏÑ±Ïùº Î∂àÎü¨Ïò§Í∏∞ -->
                            <%= data.createdAt.toISOString().split('T')[0] %>
                            <%= data.createdAt.toISOString().split('T')[1].slice(0,5) %>
                        </li>
                    </ul>

                    <!-- Ï°∞ÌöåÏàò, Ï∂îÏ≤ú, ÎåìÍ∏Ä -->
                    <ul class="post-info-second">
                        <li class="post-views">
                            Ï°∞Ìöå
                            <span>
                                <!-- Ï°∞ÌöåÏàò Î∂àÎü¨Ïò§Í∏∞ -->
                                <%= data.viewCount %>                            
                            </span>
                        </li>
                        <li class="post-ups">
                            Ï¢ãÏïÑÏöî
                            <span id="like">
                                <!-- ÏúÑÏóê ÏïÑÏù¥Îîî ÏÇ≠Ï†ú ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏èÏ∂îÏ≤úÏàò Î∂àÎü¨Ïò§Í∏∞ -->
                                <%= likeInfo.likeCount %>
                            </span>
                        </li>
                        <li class="post-com-num">
                            ÎåìÍ∏Ä
                            <!-- Ïà´Ïûê ÌÅ¥Î¶≠ Ïãú ÎåìÍ∏Ä Ï∞Ω Î∂ÄÎ∂ÑÏúºÎ°ú Ïù¥Îèô -->
                            <a href="#comment">
                                <span>
                                    <!-- ÎåìÍ∏ÄÏàò Î∂àÎü¨Ïò§Í∏∞ -->
                                    <%= commentInfo.count %>
                                </span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- ÌÉúÍ∑∏ -->
                <div class="recipe-view-tag">
                    <% tagList.forEach((name, index)=> {%> 
                        <a a href="/recipe/list/<%= name %>">#<%=name%></a>
                    <% }) %>
                </div>

                <!-- Ïø°ÌÉÄÏûÑ, ÎÇúÏù¥ÎèÑ -->
                <div class="recipe-view-timelevel">

                    <!-- Î©îÎâ¥ -->
                    <div class="recipe-view-menu">
                        üìëÎ©îÎâ¥ :
                        <div class="recipe-menu-on">
                            <!-- Î©îÎâ¥ Î∂àÎü¨Ïò§Í∏∞ -->
                            <span>
                                <%= data.menu %>
                            </span>
                        </div>
                        ,
                    </div>

                    <!-- Ïø°ÌÉÄÏûÑ -->
                    <div class="recipe-view-cooktime">
                        ‚è±Ô∏èÏø°ÌÉÄÏûÑ ÏïΩ
                        <div class="recipe-time-on">
                            <!-- Ïø°ÌÉÄÏûÑ Î∂àÎü¨Ïò§Í∏∞ -->
                            <span>
                                <%= data.cookTime %>
                            </span>
                        </div>
                        Î∂Ñ ,
                    </div>

                    <!-- ÎÇúÏù¥ÎèÑ -->
                    <div class="recipe-view-level">
                        ÎÇúÏù¥ÎèÑ 
                        <!-- ÎÇúÏù¥ÎèÑ Î∂àÎü¨Ïò§Í∏∞ -->
                        <%- Array(data.cookLevel + 1).join('‚≠ê') %>
                    </div>

                </div>

                <!-- ÏÜåÍ∞úÍ∏ÄÍ≥º Ïç∏ÎÑ§Ïùº -->
                <div class="recipe-view-imgintro">

                    <!-- Ïç∏ÎÑ§Ïùº -->
                    <div class="recipe-view-thumb">
                        <img src="/images/recipeDefault.png">
                    </div>

                    <!-- ÏÜåÍ∞úÍ∏Ä -->
                    <div class="recipe-view-intro">
                        <!-- ÏÜåÍ∞úÍ∏Ä ÎÇ¥Ïö© Î∂àÎü¨Ïò§Í∏∞ -->
                        <%= data.intro %>
                    </div>
                </div>

                <!-- Ïû¨Î£å -->
                <div class="recipe-view-ingredients">
                    
                    <!-- Ïû¨Î£å ÌÉÄÏù¥ÌãÄ -->
                    <div class="view-ingredients-title">
                        Ïû¨Î£å
                    </div>

                    <!-- Ïû¨Î£åÎì§ -->
                    <div class="view-ingredients-box">
                        <% ingredientList.forEach((ingr, index)=>{ %>
                            <!-- Ïû¨Î£å ÌïòÎÇò -->
                            <div class="view-ingredient">

                                <!-- Ïû¨Î£å Ïù¥Î¶Ñ Î∂àÎü¨Ïò§Í∏∞ -->
                                <span class="view-ingr"><%= ingr.name %></span>

                                <!-- Ïû¨Î£å Ïñë Î∂àÎü¨Ïò§Í∏∞ -->
                                <span class="view-quan"><%= ingr.amount %>, </span>
                            </div>
                        <% }) %>
                    </div>

                </div>

                <!-- Îã®Í≥Ñ -->
                <div class="recipe-view-steps">

                    <!-- Îã®Í≥Ñ ÌÉÄÏù¥ÌãÄ -->
                    <div class="view-steps-title">
                        ÏöîÎ¶¨
                        <br>Í≥ºÏ†ï
                    </div>

                    <!-- Îã®Í≥ÑÎì§ -->
                    <div class="view-steps-box">
                        <% stepList.forEach((step, index)=> { %>
                            <!-- Îã®Í≥Ñ ÌïòÎÇò -->
                            <div class="view-step">
                                <!-- ‚úîÔ∏è -->
                                <div class="chkchk" style="font-weight: 800;">
                                    <%= step.step_no %>. 
                                </div>                                  
                                <!-- Îã®Í≥Ñ ÎÇ¥Ïö© Î∂àÎü¨Ïò§Í∏∞ -->
                                <%= step.content %>
                            </div>

                        <% }) %>
                    </div>

                </div>
                
                
                <!-- Ï∂îÏ≤ú, Ïä§ÌÅ¨Îû©ÌïòÍ∏∞ -->
                <% if(typeof user != "undefined"){ %>
                    <!-- Î°úÍ∑∏Ïù∏ ÏÉÅÌÉúÏùº Ïãú -->
                    <div class="upscrap-box">
                        <div class="like-box">
                            <button id="likeBTN" name="login" onClick="handleLikeButtonClick();">ü§ç</button>
                            <div id="likeState" class="like-title"> 
                                ‚ù§Ô∏è<%= likeInfo.likeCount %>
                            </div>
                        </div>   
                    </div>
                <% } else{ %>
                    <!-- ÎπÑÎ°úÍ∑∏Ïù∏ -->
                    <div class="upscrap-box">
                        <div class="like-box">
                            <button id="likeButton" name="login" value="Ï¢ãÏïÑÏöî" onClick="goLogin()">ü§ç</button>
                            <div class="like-title">
                                ‚ù§Ô∏è23
                            </div>
                        </div>
                    </div>
                <% } %>
    
                <!-- Í∏Ä ÌïòÎã® -->
                <div class="bottom-nav">
                    <div class="goback">
                        <a href="/recipe/list">üîô Î™©Î°ùÏúºÎ°ú</a>
                    </div>
    
                    <!-- Î°úÍ∑∏Ïù∏Ìïú Ïú†Ï†ÄÍ∞Ä Í∏Ä ÏûëÏÑ±ÏûêÏùºÎïå Î≥¥Ïù¥Í∏∞ -->
                    <% if(typeof user != "undefined" && user.mem_id == data.writer_id) { %>
                        <div class="editbox">
                            <ul>
                                <li>
                                    <span>
                                        <!-- Í∏Ä ÏûëÏÑ±ÏûêÏù¥Î©¥ Í≤åÏãúÍ∏Ä ÏàòÏ†ï ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô -->
                                        <a>ÏàòÏ†ï</a>
                                    </span>
                                </li>
                                <li>
                                    <span>
                                        <!-- Í∏Ä ÏûëÏÑ±ÏûêÏù¥Î©¥ Í≤åÏãúÍ∏Ä ÏÇ≠Ï†ú -->
                                        <a>ÏÇ≠Ï†ú</a>
                                        <!-- `/recipe/delete?no=${data.recipe_id}` -->
                                    </span>
                                </li>
                            </ul>
                        </div>
                    <% } %>

                </div>       

            </div>

            <!-- ÎåìÍ∏Ä Î∂ÄÎ∂Ñ -->
            <div class="comment-section">
                <a name="comment">
                    <div class="comment-view">
                        <div class="comment-title">
                            <!-- Í¥ÑÌò∏ ÏïàÏóê ÎåìÍ∏ÄÏàò ÌëúÏãú -->
                            üó®Ô∏èÎåìÍ∏Ä(<%= commentInfo.count%>)
                        </div>
                    </div>
                    <!-- ÏûëÏÑ±Îêú ÎåìÍ∏ÄÏù¥ ÏóÜÏùÑ Í≤ΩÏö∞ -->
                    <% if (commentInfo.dataList == ''){ %>
                        <div class="comment-view">
                            <div class="comment-page"></div>
                        </div>
                        <div class="comment-list">
                            <div class class="com-namentime">
                                ÏïÑÏßÅ ÎåìÍ∏ÄÏù¥ ÏóÜÏñ¥Ïöî!! 
                            </div>
                        </div>
                    <% } else { %>
                        <div class="comment-view">
                            <div class="comment-page">
                                <!-- ÎåìÍ∏Ä ÌéòÏù¥ÏßÄ, ÎåìÍ∏ÄÏù¥ 20Í∞ú Ïù¥ÏÉÅÏùº Îïå 1,2... ÌéòÏù¥ÏßÄ ÎÇòÌÉÄÎÇòÍ∏∞. ÏïÑÎûòÎäî ÏòàÏãú -->
                                <% if(commentInfo.pagination.pageNo!=1){ %>
                                    <a id="prev-a" href="javascript:void(0);" data-page="<%= commentInfo.pagination.pageNo-1 %>" onclick="comPageClick(this.dataset.page)" >&nbsp;&lt;&nbsp;</a>
                                <% } %>
                                <% for (var i = commentInfo.pagination.startPage; i < commentInfo.pagination.endPage + 1; i++){ %>
                                        <% if (commentInfo.pagination.pageNo == i){ %> 
                                            <a href="javascript:void(0);"class="number-button" data-page="<%= i %>" style="font-weight: 800;" onclick="comPageClick(this.dataset.page)">&nbsp;<%= i %>&nbsp;</a>
                                        <% } else { %>
                                            <a href="javascript:void(0);"class="number-button" data-page="<%= i %>" onclick="comPageClick(this.dataset.page)">&nbsp;<%= i %>&nbsp;</a>
                                        <% } %>
                                <% } %>
                                <% if (commentInfo.pagination.pageNo != commentInfo.pagination.totalPage){ %>
                                    <a id="next-a" href="javascript:void(0);" data-page="<%= commentInfo.pagination.startPage-1 %>" onclick="comPageClick(this.dataset.page)">&nbsp;&gt;&nbsp;</a>
                                <% } %>
                            </div>
                        </div>               
                        <div class="comment-list">
                            <% commentInfo.dataList.forEach((comment, index)=>{ %>
                                <div class="com-namentime">
                                    <div class="com-name">
                                        <!-- ÎåìÍ∏Ä ÏûëÏÑ±Ïûê Ïù¥Î¶Ñ -->
                                        <%= comment.mem_id %>
                                    </div>
                                    <div class="com-time">
                                        <!-- ÎåìÍ∏ÄÏù¥ ÏûëÏÑ±Îêú ÏãúÍ∞Ñ -->
                                        (<%= comment.createdAt.toISOString().split('T')[0] %>
                                        <%= comment.createdAt.toISOString().split('T')[1].slice(0,5) %>)
                                    </div>

                                    <!-- Í∏Ä Ïó¥Îûå Ïú†Ï†Ä = ÎåìÍ∏Ä ÏûëÏÑ±ÏûêÏù¥Î©¥ Î≥¥Ïù¥Í∏∞ -->
                                    <div class="com-editbox">
                                        <span>ÏàòÏ†ï</span>
                                        <span>ÏÇ≠Ï†ú</span>
                                    </div>
                                    
                                </div>
                                <div class="com-text">
                                    <!-- ÎåìÍ∏Ä ÎÇ¥Ïö© -->
                                    <%= comment.content %>
                                </div>
                            <% }); %>
                        </div>
                    <% } %>


                    <!-- ÎåìÍ∏Ä Îã¨Í∏∞ -->
                    <% if(typeof user != "undefined"){ %>
                        <!-- Î°úÍ∑∏Ïù∏ ÏÉÅÌÉúÏùº Ïãú -->
                        <div class="comment-write">
                            <div class="comment-write-form">    
                                <!--  ‚ö†Ô∏è‚ö†Ô∏è Ìèº ÌÉúÍ∑∏ Î∞îÍøà. 231109 -->
                                <div class="commenter">
                                    <!-- Ïú†Ï†Ä ÎãâÎÑ§ÏûÑ -->
                                    <%= user.mem_id %>
                                </div>
                                <form id="commentForm" onsubmit="return confirm('ÎåìÍ∏ÄÏùÑ Îì±Î°ùÌïòÏãúÍ≤†ÏäµÎãàÍπå?')">
                                    <div class="comment-write-section">
                                        <div class="write-comment">
                                            <textarea id="comment-textarea" name="content" placeholder="Í≥†Ïö¥Îßê ÎåìÍ∏Ä Îã¨Í∏∞" required></textarea>
                                        </div>
                                        <div class="submit-button">
                                            <button type="submit" name="submit">Îì±Î°ù</button>
                                        </div>
                                    </div>
                                </form> 
                            </div>
                        </div>
                    <% } else{ %>
                        <!-- ÎπÑÎ°úÍ∑∏Ïù∏ -->
                        <div class="non-user-comment">
                            <textarea onclick="goLogin()" placeholder="Î°úÍ∑∏Ïù∏ÌïòÍ≥† ÎåìÍ∏ÄÏùÑ Îã¨ÏïÑÎ≥¥ÏÑ∏Ïöî!" required></textarea>
                        </div>
                    <% } %>

                <!-- ÌïòÎã® -->
                <div class="box">
                    <button onclick="location.href='/recipe/list'">Í∏ÄÎ™©Î°ù</button>
                </div>
            </a>
        </div>

        </div>

        
        
        <!-- Ïò§Î•∏Ï™Ω ÏÇ¨Ïù¥ÎìúÎ∞î -->
        <div class="sidebar-box-right">
            <a href="#up-scroll">
                <div>‚ñ≤</div>
            </a>
            <a href="#down-scroll">
                <div>‚ñº</div>
            </a>
            <a href="#comment">
                üó®Ô∏è
            </a>
        </div>

    </div>
</section>


<script>
    const _recipeId = JSON.parse('<%= data.recipe_id %>');
    if ('<%= likeInfo.isLiked %>'){
        var isLiked = JSON.parse('<%= likeInfo.isLiked %>');
        console.log(isLiked,'ÎåÄÏ≤¥ Ïôú');
    }  
    const numberWrapper = document.getElementsByClassName('number-button-wrapper')[0];
    
    function handleLikeButtonClick() {
        console.log('recipeId: ', _recipeId, isLiked);
        console.log(isLiked, 'Ï¢ãÏïÑÏöî ÎàÑÎ¶Ñ ÏÉÅÌÉú');  
        // console.log('Ï¢ãÏïÑÏöî Î≤ÑÌäº ÌÅ¥Î¶≠');
        if(isLiked){
            isLiked--;
            var likeBTN = document.getElementById("likeBTN");
            likeBTN.innerHTML = 'ü§ç';
        } else{
            isLiked++;
            var likeBTN = document.getElementById("likeBTN");
            likeBTN.innerHTML = '‚ù§Ô∏è';
        }
        
        // //AJAX ÏöîÏ≤≠
        // const likeButton = document.getElementById("likeButton").a
        fetch(`/recipe/like`, {   //`/recipe/view?no=${_recipeId}`
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({recipeId: _recipeId, isLiked: isLiked}) // postidÎ•º ÏÑúÎ≤ÑÎ°ú Ï†ÑÏÜ°
        })
        .then(response => response.json())
        .then(data=>{
            console.log('ÏÑúÎ≤Ñ ÏùëÎãµ-Ïú†Ï†Ä Ï¢ãÏïÑÏöî ÏÉÅÌÉú: ', data.isLiked);
            console.log('ÏÑúÎ≤Ñ ÏùëÎãµ-Ï¢ãÏïÑÏöî Ïàò : ', data.likeCount);
            document.getElementById('like').innerHTML=data.likeCount;
            document.getElementById('likeState').innerHTML = data.isLiked;
            // data.
            
            //ÏÑúÎ≤ÑÏóêÏÑú Î∞õÏùÄ ÏùëÎãµÏóê Îî∞Îùº ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ï∏° Ï≤ò„Ö£„Ñπ
            if(data.success){
                // Ï¢ãÏïÑÏöî Î∞òÏòÅ ÏÑ±Í≥µ => Ïù¥ÎØ∏ÏßÄ Î≥ÄÍ≤Ω
                console.log('Ï¢ãÏïÑÏöî success..!', data.isLiked);
                if(data.isLiked)
                    alert(data.message);
                else
                    alert('Ï¢ãÏïÑÏöîÎ•º Ï∑®ÏÜåÌñàÏäµÎãàÎã§!');
            } else {
                //Ïã§Ìå®
                console.log('failed..!');
            }

        })
        .catch((error)=>{
            console.error('ÏóêÎü¨Î∞úÏÉù: ', error.message);
        });
    }

    document.getElementById("commentForm").addEventListener("submit", function (event) {
        event.preventDefault(); // a, submit ÌÉúÍ∑∏ ÌÅ¥Î¶≠ Ïãú, Ï∞Ω Ïù¥Îèô, ÏÉàÎ°úÍ≥†Ïπ® Ïã§ÌñâÎê®. Í∑∏ ÎèôÏûë Î∞©ÏßÄ.
        const formData = new FormData(event.target);
        const content = formData.get("content");
        // console.log('[recipeView.ejs] recipeIdÎûë content', _recipeId, content);
        
        fetch(`/recipe/newComment?no=<%= data.recipe_id %>&sort=earliest`, {   //`/recipe/view?no=${_recipeId}`
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({recipeId: _recipeId, content: content}) // postidÎ•º ÏÑúÎ≤ÑÎ°ú Ï†ÑÏÜ°
        })
        .then(response=> response.json())
        .then(data=>{
            document.getElementById("comment-textarea").value ="";
            // fetchData Ìò∏Ï∂úÌïòÍ∏∞
            fetchCommentData(data.page);    ///ÎåìÍ∏Ä ÎßàÏßÄÎßâ ÌéòÏù¥ÏßÄÎßå Í∞ÄÏ†∏ÏôÄÏÑú Ï†ÑÎã¨
            // console.log('[ÏÑúÎ≤Ñ ÏùëÎãµ]: ',data);
        })
        .catch(error=>{
            console.log('[Error]: While fetching newComment', error);
            document.getElementById("comment-textarea").value ="";
        })
    })

    
        // getElementsByClassName("")[index]. Î°ú Í∞Å ÌéòÏù¥ÏßÄ Î≤ÑÌäº Ï†ëÍ∑ºÌïòÏûê
    // ÌïòÌïò, Ïù¥Í±∏ Ï∞∏ Ïñ¥ÎñªÍ≤å Ìï¥ÏïºÌï†ÏßÄ. ÎåìÍ∏Ä ÏûëÏÑ±ÌïòÍ≥† ÎåìÍ∏Ä ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò ÏóÖÎç∞Ïù¥Ìä∏ÌïòÎ©¥ Ï¢Ä Ï§ëÎ≥µÏù¥ÏûñÏïÑ
    async function fetchCommentData(page){
        // test ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖòÏù¥Îûë Îç∞Ïù¥ÌÑ∞ Î™©Î°ù Î≥ÄÍ≤Ω ÌôïÏù∏
        try{
            const response = await fetch(`/recipe/getComment?no=${_recipeId}&pageno=${page}&sort=earliest`);
            const data = await response.json();
            const pagination = data.commentInfo.pagination;
            const dataList = data.commentInfo.dataList;
            const comPageDiv = document.getElementsByClassName("comment-page")[0];
            const comListDiv = document.getElementsByClassName("comment-list")[0];
            var contentPage = '';
            var contentComment = '';
            //üíö <  > ÌëúÏãú ÌôïÏù∏.
            
            if(pagination.pageNo>1){  // 1ÌéòÏù¥ÏßÄ Ï†úÏô∏ < ÌëúÏãú
                contentPage += `<a id="prev-a" href="javascript:void(0);" data-page="${pagination.pageNo-1}" onclick="comPageClick(this.dataset.page)" >&nbsp;&lt;&nbsp;</a>`;
            }
            for (var i= pagination.startPage; i<pagination.endPage + 1; i++){
                if (pagination.pageNo == i){
                    contentPage += `<a href="javascript:void(0);"class="number-button" data-page="${i}" style="font-weight: 800;" onclick="comPageClick(this.dataset.page)">&nbsp;${i}&nbsp;</a>`;
                } else{
                    contentPage += `<a href="javascript:void(0);"class="number-button" data-page="${i}" onclick="comPageClick(this.dataset.page)">&nbsp;${i}&nbsp;</a>`;
                }
            }
            if(pagination.pageNo<pagination.totalPage){
                contentPage += `<a id="next-a" href="javascript:void(0);" data-page="${pagination.pageNo+1}" onclick="comPageClick(this.dataset.page)">&nbsp;&gt;&nbsp;</a>`;
            }
            comPageDiv.innerHTML = contentPage;

            // üó®Ô∏è ÎåìÍ∏Ä ÌëúÏãú
            try{
                    comListDiv.innerText="";    //Ïù¥Í±∞ ÏàúÏÑúÎûë ÏãúÍ∞Ñ ÎÇ†Ïßú ÎïåÎ¨∏Ïóê ÏïàÎêêÏóàÎã§„Öè„ÖèÏïô ÏãúÍ∞Ñ ÎÇ†Ïßú ÎïúÏóê ÎåìÍ∏ÄÏù¥ ÏïÑÏù¥ÎîîÎßå ÌëúÏãúÎê®
            // div.comment-list>div.com-namentime>div.com-name + div.com-time
            //                  div.com-content
                dataList.forEach((data, index)=>{
                    // contentComment = 
                    let nameNTimeDiv = document.createElement('div');
                    nameNTimeDiv.setAttribute("class", "com-namentime");

                    let nameDiv = document.createElement('div');
                    nameDiv.setAttribute("class", "com-name");
                    let timeDiv = document.createElement('div');
                    timeDiv.setAttribute("class", "com-time");

                    let textDiv = document.createElement('div');
                    textDiv.setAttribute("class", "com-text");

                    // div Ìï©Ï≤¥!!!
                    nameNTimeDiv.append(nameDiv, timeDiv);
                    comListDiv.append(nameNTimeDiv, textDiv);

                    nameDiv.innerText = data.mem_id;
                    timeDiv.innerText = '('+data.createdAt.slice(0,10) + ' ' + data.createdAt.slice(11,16)+')';//'(' + data.createdAt.toISOString().split('T')[0] + data.createdAt.toISOString().split('T')[1].slice(0,5) + ')';
                    textDiv.innerText = data.content;
                    // comListDiv.appendChild
            })
        } catch(err){
            console.log('Error: while updating comments list', err.message);
        }

        } catch (err){
            console.log('[Error]: boardPost.ejs-fetchData and Pagination', err);
        }
    }

    function comPageClick(page){
        // fetch Ìï®ÏàòÏóê ÌòÑÏû¨ ÌéòÏù¥ÏßÄ Í∞í Ï†ÑÏÜ°
        fetchCommentData(page);
    }

</script>