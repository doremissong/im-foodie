<!-- STYLESHEET -->
<link rel="stylesheet" href="/css/gatherMain.css">

<!--SECTION-->
<section>
    <div class="gather-section">
        <div class="gather-list">
            <div class="gather-main">
                <a href="/gather">전체 밥모임</a>
            </div>
			<div class="gather-sub">
				<ul class="gather-sub-list">
					<li class="gather-sub-name">
							<a href="/gather/recruiting">모집중</a>
					</li>
					<li class="board-sub-name">
						<a href="/gather/completed">모집완료</a>
					</li>
					<li class="board-sub-name">
						<a href="/gather/mygroup">나의 밥모임</a>
					</li>
				</ul>
			</div>
        </div>

		<div class="recruiting-box">
			<div class="gathering-title">
				<span class="text">지금 모집중인 밥모임</span>
				<span class="more">
					<a href="/gather/recruiting">[더보기]</a>
				</span>
			</div>

			<div class="gathering-slide">
				<div class="prevArrow-box">
					<button class="prevArrow">
						<i class="las la-chevron-left"></i>
					</button>
				</div>
				<!-- 슬라이드 갯수 최대 6개 -->
				<div class="slider-wrap">

					<!-- if 모집중인 모임이 없을 경우 출력 -->
					<div class="slide-item">
						현재 모집중인 모임이 없습니다.
					</div>

					<!-- if 모집중인 모임 최신순으로 최대 5개 출력 -->
					<% for(var i = 0; i < 5; i++){ %>
						<div class="slide-item">
							<span class="gather-name">
								모임이름
							</span>
							<span class="gather-region">
								서울시 서초구 방배동
							</span>
							<span class="gather-number">
								현인원/총원
							</span>

							<!-- hover시 신청, 자세히 버튼 -->
							<div class="button-box">
								<a href="/gather/join">
									<button class="join-group">신청</button>
								</a>
								<a href="/gather/details">
									<button class="show-group">자세히</button>
								</a>
							</div>
						</div>
					<% } %>

					<!-- if 모집중인 모임이 6개 이상일 경우 추가로 출력 -->
					<div>
						<a href="/gather/recruiting">
							<div class="slide-item">
								더 많은 모임을 확인해보세요!
							</div>
						</a>
					</div>

				</div>
				<div class="nextArrow-box">
					<button class="nextArrow">
						<i class="las la-chevron-right"></i>
					</button>
				</div>		  
			</div>
		</div>
		<div class="completed-box">
			<div class="gathering-title">
				<span class="text">모집 끝! 이런 모임도 있었어요 :)</span>
				<span class="more">
					<a href="/gather/completed">[더보기]</a>
				</span>
			</div>
			<div class="gathering-slide">
				<div class="prevArrow-box">
					<button class="prevArrow">
						<i class="las la-chevron-left"></i>
					</button>
				</div>
				<!-- 슬라이드 갯수 최대 6개 -->
				<div class="slider-wrap">

					<!-- if 모집 완료된 모임이 없을 경우 출력 -->
					<div class="slide-item">
						현재 모집 완료된 모임이 없습니다.
					</div>

					<!-- if 모집 완료된 모임 최신순으로 최대 5개 출력 -->
					<% for(var i = 0; i < 5; i++){ %>
						<div class="slide-item">
							<span class="gather-name">
								모임이름
							</span>
							<span class="gather-region">
								서울시 노원구 공릉동
							</span>
							<span class="gather-number">
								현인원/총원
							</span>

							<!-- hover시 신청, 자세히 버튼 -->
							<div class="button-box">
								<!-- <a href="/gather/join">
									<button class="join-group">신청</button>
								</a> -->
								<a href="/gather/details">
									<button class="show-group-completed">자세히</button>
								</a>
							</div>
						</div>
					<% } %>

					<!-- if 모집중인 모임이 6개 이상일 경우 추가로 출력 -->
					<div>
						<a href="/gather/completed">
							<div class="slide-item">
								더 많은 모임을 확인해보세요!
							</div>
						</a>
					</div>

				</div>
				<div class="nextArrow-box">
					<button class="nextArrow">
						<i class="las la-chevron-right"></i>
					</button>
				</div>		  
			</div>
		</div>
		<div> <!-- 지워야하나? -->

			<a href="/gather/create">
				<button class="write-button">
					밥모임 만들기
				</button>
			</a>
		</div>
		<ul class="post-index">
			<li>
				<div class="post-standard">
					<p class="post-number">번호</p>
					<p class="post-title">밥모임이름</p>
					<p class="post-writer">방장</p>
					<p class="post-date">마감일</p>
					<p class="post-view">현재 상태</p>
					<p class="post-date"> </p>
				</div>
			</li>
		</ul>
        <ul class="post-list">
			<% if(typeof msg != "undefined"){ %>
				<%= msg %>
			<% } %>
            <!-- <li class="post">
              	<div class="post-container">
                	<p class="post-number">번호</p>
					<p class="post-board">게시판</p>
					<p class="post-title">제목</p>
					<p class="post-writer">글쓴이</p>
					<p class="post-date">작성일</p>
					<p class="post-view">조회수</p>
              	</div>
            </li> -->
            <% dataList.forEach((data, index)=>{ %>
                <li class="post">
                    <div class="post-container">
						<!-- 페이지네이션수정 -->
                        <p class="post-number"><%= pagination.startItemNo + 1 + index %></p>
                        <p class="post-title"><a href="/gather/details?id=<%= data.gathering_id %>"><%= data.name %></a></p>
                        <p class="post-writer"><%= data.leader_id%></p>
                        <p class="post-date"><%= data.deadline.toISOString().slice(0,10) %></p>
						<% if(data.state==0){ %>
							<p class="post-date">모집중</p>
						<% } else if(data.state==1) { %>
							<p class="post-date">모집마감 (2)수정</p>
						<% } %>
						<p class="post-date">
							<a href="/gather/apply?id=<%= data.gathering_id %>">
								<button class="write-button">
									같이먹기
								</button>
							</a>
						</p>
                    </div>
                </li>
            <% }); %>
        </ul>
		<!-- 페이지네이션 추가 -->
        <div class="pagination-container">
            <% if (pagination.curSet > 1){ %>    
                <div class="prev-set-button"><a href="/gather?pageno=<%= pagination.startPage-1%>">&lt;&lt;&nbsp; </a></div>
            <% } %>
            <% if (pagination.pageNo!=1){ %>    
                <div class="prev-button"><a href="/gather?pageno=<%= pagination.pageNo-1%>">&nbsp;이전&nbsp;</a></div>
            <% } %>
            <div class="number-button-wrapper">
                <% for (var i=pagination.startPage; i < pagination.endPage+1; i++){ %>
                    <span class="number-button"> 
						<% if (pagination.pageNo==i){ %>
							<% console.log(i, pagination.pageNo); %>
							<a href="/gather?pageno=<%= i %>" style="font-weight: 800;"><%= i %></a>
						<% } else{ %>
							<a href="/gather?pageno=<%= i %>"><%= i %></a>
						<% } %>
                    </span>
                <% } %>
            </div>
            <% if (pagination.pageNo != pagination.totalPage){ %>
                <div class="next-button"><a href="/gather?pageno=<%= pagination.pageNo+1%>"> &nbsp;이후&nbsp;</a></div>
            <% }%>
			<% if (pagination.curSet < pagination.totalSet){ %>
                <div class="next-set-button"><a href="/gather?pageno=<%= pagination.endPage+1%>">&nbsp;&gt;&gt;</a></div>
            <% }%>
        </div>
    </div>
</section>