<!-- STYLESHEET -->
<link rel="stylesheet" href="/css/gather/gatherView.css">

<!-- SECTION -->
<section>
    <div class="gather-view-section">

        <!-- Ïã†Ï≤≠ Î™®Îã¨ Ï∞Ω -->
		<div id="modalWrapViewJoin">

			<!-- Î™®Îã¨ -->
			<div id="modalBodyViewJoin">

				<!-- ÎÇ¥Ïö©Î¨º -->
				<div class="gather-join-contents">

					<!-- Î∞•Î™®ÏûÑ Ïù¥Î¶Ñ -->
					<div class="join-target">

						<!-- ÌÅ¥Î¶≠Ìïú Î∞•Î™®ÏûÑÏùò Ïù¥Î¶Ñ Î∂àÎü¨Ïò§Í∏∞ -->
						<%= gatherData.name %>

					</div>
					
					<!-- Ïã†Ï≤≠ Ìèº -->
                    <!-- ‚ö†Ô∏èÏù¥ÎØ∏ Ïã†Ï≤≠Ìïú ÏÇ¨Îûå, Î©§Î≤ÑÏù∏ ÏÇ¨ÎûåÏùÄ ÏïàÎ≥¥Ïù¥Í∏∞ -->
					<form method="post" id="form-apply"
                        action = "/gather/apply?no=<%= gatherData.gathering_id %>"
                        onsubmit="return joinClick()"
                        target="applyResult">
                                                        <!-- ‚ö†Ô∏èform ÌÉúÍ∑∏ ÎèôÏûë ÌôïÏù∏ÌïòÍ∏∞‚ö†Ô∏è  -->
						<!-- Ïù∏ÏÇ¨Îßê Î∞ïÏä§ -->
						<div class="gather-join-text">

							<!-- ÌÉÄÏù¥ÌãÄ -->
							<div class="join-title">
								Í∞ôÏù¥ Î®πÏñ¥Ïöîüòä
							</div>

							<!-- Ïù∏ÏÇ¨Îßê -->
							<div class="join-text">

								<!-- Ïù∏ÏÇ¨Îßê ÌÉÄÏù¥ÌãÄÍ≥º ÏÑ† -->
								<div class="join-text-title">

									<!-- Ïù∏ÏÇ¨Îßê ÌÉÄÏù¥ÌãÄ ÎÇ¥Ïö© -->
									<div class="join-text-title-content">
										Ïù∏ÏÇ¨Îßê
									</div>
									<div class="join-text-title-border">
										<p>&nbsp;</p>
									</div>

								</div>

								<div class="join-textarea-box">
									<!-- ÌÖçÏä§Ìä∏ÏïÑÎ¶¨ÏïÑ -->
									<textarea name="message" id="gatherJoinArea" placeholder="Ïù∏ÏÇ¨ÎßêÏùÑ Ï†ÅÏñ¥Ï£ºÏÑ∏Ïöî :)"></textarea>
								</div>
								
							</div>
							
						</div>

						<!-- Î≤ÑÌäº Î∞ïÏä§ -->
						<div class="join-btn-box">

							<!-- Ïã†Ï≤≠ Î≤ÑÌäº -->
							<button type="submit">Ïã†Ï≤≠</button>

							<!-- Ï∑®ÏÜå Î≤ÑÌäº -->
							<button type="button" id="closeBtnViewJoin">Ï∑®ÏÜå</button>

						</div>	

					</form>
					<iframe name="applyResult" style="display:none;"></iframe>

				</div>
	
			</div>
		</div>

        <!-- Î∞•Î™®ÏûÑ ÎÇ¥Ïö© -->
        <div class="post-section">

            <!-- Î™®ÏûÑ Ïù¥Î¶Ñ -->
            <div class="post-title">
                <div class="gather-view-title">
                    <!-- Î™®ÏûÑ Ïù¥Î¶Ñ Î∂àÎü¨Ïò§Í∏∞ -->
                    <%= gatherData.name %>
                </div>
            </div>

            <!-- Î™®ÏûÑÏû•, Í≤åÏãúÏùº, Ï°∞ÌöåÏàò -->
            <div class="post-info-box">
                <ul class="post-info-first">
                    <li class="writer-name">
                        Î™®ÏûÑÏû•
                        <!-- ÏûëÏÑ±Ïûê Ïù¥Î¶Ñ Î∂àÎü¨Ïò§Í∏∞ -->
                        <%= gatherData.leader_id %>
                    </li>
                    <li class="write-date">
                        Í≤åÏãúÏùº
                        <!-- ÏûëÏÑ±Ïùº Î∂àÎü¨Ïò§Í∏∞ -->
                        <%= gatherData.createdAt.toISOString().slice(0,10) %>
                    </li>
                </ul>
                <!-- <ul class="post-info-second">
                    <li class="post-views">
                        Ï°∞Ìöå
                        <span>
                            <%= gatherData.viewCount %>
                        </span>
                    </li>
                </ul> -->
            </div>

            <!-- Ïù¥ÎØ∏ÏßÄ, ÏßÄÏó≠, ÏãùÎãπ, Ïù∏Ïõê, ÎßàÍ∞êÏùº, ÏÜåÍ∞úÍ∏Ä -->
            <div class="post-content">
                
                <!-- Ïù¥ÎØ∏ÏßÄ, ÏßÄÏó≠, ÏãùÎãπ -->
				<div class="view-imgNothers">
					<!-- Ïù¥ÎØ∏ÏßÄ -->
					<div class="view-img">
						<!-- <img src="/images/candy-blue.png"> -->
                        <img name ='img' src="<%= gatherData.image_url? gatherData.image_url: '/images/candy-blue.png'%>">
                        <!-- "https://s3.ap-northeast-2.amazonaws.com/im-foodie.com/buzz.png" -->
					</div>
					<!-- ÏßÄÏó≠Í≥º ÏãùÎãπ -->
					<div class="view-regionNrest">
						<!-- ÏßÄÏó≠ -->
						<div class="view-region">
							<div class="view-region-title">
								Î™®ÏûÑ ÏßÄÏó≠ :
							</div>
							<!-- ÏßÄÏó≠ Î∂àÎü¨Ïò§Í∏∞ -->
							<div class="view-region-data">
								<%= gatherData.city %>
                                <%= gatherData.district %>
                                <%= gatherData.neighborhood %>
							</div>
						</div>
						<!-- ÏãùÎãπ -->
						<div class="view-restaurant">
							<div class="view-restaurant-title">
								Ìï®Íªò Ìï† ÎßõÏßë :
							</div>
							<!-- ÎßõÏßë Î∂àÎü¨Ïò§Í∏∞ -->
							<div class="view-restaurant-data">
								<%= gatherData.place %>
							</div>
						</div>
					</div>			
				</div>

                <!-- Î™®ÏßëÏù∏ÏõêÍ≥º ÎßàÍ∞êÏùº -->
                <div class="view-numNdeadline">

                    <!-- Ïù∏ÏõêÏàò -->
					<div class="view-numbers">
						<div class="view-numbers-title">
							Î™®Ïßë Ïù∏ÏõêÏàò <span>(ÌòÑÏû¨Ïù∏Ïõê/Ï¥ùÏõê)</span> :
						</div>					

						<!-- Ïù∏ÏõêÏàò Î∂àÎü¨Ïò§Í∏∞ -->
						<div class="view-numbers-data">
                            <!-- ÌòÑÏù∏Ïõê -->
							<span><%= gatherData.currentHeadCount %></span>
                            /
                            <!-- Ï¥ùÏõê -->
                            <span><%= gatherData.maximumHeadCount %></span>
						</div>
					</div>
					<!-- ÎßàÍ∞êÏùº -->
					<div class="view-deadline">
						<div class="view-deadline-title">
							Î™®Ïßë ÎßàÍ∞êÏùº :
						</div>
						<!-- ÎßàÍ∞êÏùº Î∂àÎü¨Ïò§Í∏∞ -->
						<div class="view-deadline-data">
							<%= gatherData.deadline.toISOString().slice(0,10) %>
						</div>
					</div>

                </div>

                <!-- ÏÜåÍ∞úÍ∏Ä -->
				<div class="view-intro">
					<div class="view-intro-title">
						Î™®ÏûÑ ÏÜåÍ∞úÍ∏Ä :
					</div>

					<!-- ÏÜåÍ∞úÍ∏Ä Î∂àÎü¨Ïò§Í∏∞ -->
					<div class="view-intro-data">
						<%- gatherData.description %>
					</div>
				</div>
            </div>

            
            <% switch(who){ 
                case 0: %> 
                    <div class="view-button-box">
                        <!-- ÏàòÏ†ï -->
                        <div class="">
                            <a href='/gather/update?no=<%= gatherData.gathering_id %>'>
                                <button>ÏàòÏ†ïÌïòÍ∏∞</button>  
                            </a>    
                        </div>
                        <!-- ÏÇ≠Ï†ú -->
                        <div class="">
                            <a href='/gather/delete?no=<%= gatherData.gathering_id %>'>
                                <button>ÏÇ≠Ï†úÌïòÍ∏∞</button>  
                            </a>   
                        </div>
                        <!-- Î™©Î°ùÏúºÎ°ú -->
                        <div>
                            <a href="/gather">
                                <button>Î™©Î°ùÏúºÎ°ú</button>
                            </a>
                        </div>
                    </div>
                    <% break; %>
                <% case 1: %>   
                    <div class="view-button-box">
                        <!-- ÌÉàÌá¥ -->
                        <div class="">
                            <a href='/gather/banMember?no=<%= gatherData.gathering_id %>&memId=<%= user.mem_id %>&mode=1' target="blankifr">
                                <button>ÌÉàÌá¥ÌïòÍ∏∞</button>  
                            </a>    
                        </div>
                        <!-- Î™©Î°ùÏúºÎ°ú -->
                        <div>
                            <a href="/gather">
                                <button>Î™©Î°ùÏúºÎ°ú</button>
                            </a>
                        </div>
                    </div>
                    <% break; %>
                <% case 2: %>   
                    <% break; %>
                <% default: %>
                <!-- Í±∞Ï†à ÎãπÌïòÍ±∞ÎÇò, Î©§Î≤Ñ ÏïÑÎãå Ïú†Ï†Ä -->
                    <div class="view-button-box">
                        <!-- Í∞ôÏù¥Î®πÏñ¥Ïöî -->
                        <% if(gatherData.state ==0){ %>
                        <div class="">
                            <button class="join-group" onclick="gatherViewJoinClick()">Í∞ôÏù¥Î®πÏñ¥Ïöî</button>            
                        </div>
                        <% } %>
                        <!-- Î™©Î°ùÏúºÎ°ú -->
                        <div>
                            <a href="/gather">
                                <button>Î™©Î°ùÏúºÎ°ú</button>
                            </a>
                        </div>
                    </div>
                    <% break; %>
            <% } %>
            <!-- if Ïó¥ÎûåÏú†Ï†Ä = ÏûëÏÑ±Ïûê(Î™®ÏûÑÏû•): ÏàòÏ†ï, ÏÇ≠Ï†ú, Î™©Î°ù -->
        </div>
        
        <!-- Ïú†Ï†Ä ÏÉÅÌô©Î≥Ñ Î≥¥Ïù¥Îäî ÌôîÎ©¥ -->
        <div class="user-situation">
            
        <!-- Ïú†Ï†ÄÍ∞Ä Î™®ÏûÑÏõêÏù¥Î©¥ [ÌÉàÌá¥] Î≤ÑÌäº  -->
        <!-- Ïú†Ï†ÄÍ∞Ä Î™®ÏûÑÏõêÏù¥Î©¥ [ÌÉàÌá¥] Î≤ÑÌäº  -->
        <% switch(who){ 
            case 0: %> 
            <!-- Ïó¥ÎûåÏú†Ï†Ä = Î™®ÏûÑÏû• -->
            <div class="view-user-master">
                <!-- Î™®ÏûÑÏõê Î™©Î°ù -->
                <div class="master-member-list">
                    <span class="title">Î™®ÏûÑÏõê Î™©Î°ù</span>

                    <!-- Îß® ÏúóÏ§Ñ Ïù∏Îç±Ïä§ -->
                    <div class="user-master-member-f">
                        <div class="master-mem-f">
                            Î™®ÏûÑÏõê
                        </div>
                        <div class="master-mem-intro-f">
                            Ïù∏ÏÇ¨Îßê
                        </div>
                        <div class="master-mem-status-f">
                            Í¥ÄÎ¶¨
                        </div>
                    </div>

                    <% memberList.forEach((member, index)=>{ %>
                        <!-- Î∂àÎü¨Ïò§Í∏∞ -->
                        <div class="user-master-member">
                            <div class="master-mem">
                                <% if (member.state == 0){ %>
                                    üëë
                                <% }%>
                                <%= member.mem_id %>
                            </div>
                            <div class="master-mem-intro">
                                <%= member.message %>
                            </div>
                            <div class="master-mem-status">
                                <% if (member.state == 1){ %>
                                    <span>
                                    <a href="/gather/banMember?no=<%= gatherData.gathering_id %>&memId=<%= member.mem_id %>&mode=0" target="blankifr">
                                        [Í∞ïÌá¥]
                                    </a>
                                    </span>
                                <% } %>
                            </div>
                            <!-- <iframe name="banResult" style="display:none;"></iframe> -->
                        </div>
                    <% }) %>

                </div>

                <% if(typeof applicantList != "undefined" && applicantList != ""){ %>
                <!-- Ïã†Ï≤≠Ïûê Î™©Î°ù -->
                <div class="master-applicant-list">
                    <span class="title">Ïã†Ï≤≠Ïûê Î™©Î°ù</span>
                    <!-- Ï≤´Î≤àÏß∏ Ïù∏Îç±Ïä§ -->
                    <div class="user-master-applicant-f">
                        <div class="master-appli-f">
                            Ïã†Ï≤≠Ïûê
                        </div>
                        <div class="master-appli-intro-f">
                            Ïù∏ÏÇ¨Îßê
                        </div>
                        <div class="master-appli-status-f">
                            Í¥ÄÎ¶¨
                        </div>
                    </div>

                    <% applicantList.forEach((aplct, index)=>{ %>
                    <!-- Î∂àÎü¨Ïò§Í∏∞ -->
                    <div class="user-master-applicant">
                        <div class="master-appli">
                            <%= aplct.mem_id %>
                        </div>
                        <div class="master-appli-intro">
                            <%= aplct.message %>
                        </div>
                        <div class="master-appli-status">
                            <span>
                                <a href="/gather/acceptMember?no=<%= gatherData.gathering_id %>&aplctId=<%= aplct.mem_id%>" target="blankifr">[ÏàòÎùΩ]</a>
                            </span>
                            <span>
                                <a href="/gather/refuseMember?no=<%= gatherData.gathering_id %>&aplctId=<%= aplct.mem_id%>" target="blankifr">[Í±∞Ï†à]</a>
                            </span>
                        </div>
                        <iframe name="blankifr" style="display:none;"></iframe> 
                    </div>
                    <% }) %>

                </div>
                <% } %>

            </div>
                <a href='/gather/update?no=<%= gatherData.gathering_id %>'>[Ìé∏Ïßë]</a>
                <a href='/gather/delete?no=<%= gatherData.gathering_id %>'>[ÏÇ≠Ï†ú]</a>
                <% break; %>
            <% case 1: %>   
            Î™®ÏûÑÏõê
                <!-- Ïó¥ÎûåÏú†Ï†Ä = Î™®ÏûÑÏõê -->
                <div class="view-user-member">

                    <div class="member-group-list">
                        <span class="title">Î™®ÏûÑ Íµ¨ÏÑ±Ïõê Î™©Î°ù</span>
                    
                        <!-- Î™®ÏûÑÏû• Î∂àÎü¨Ïò§Í∏∞ -->
                        <div class="member-group-master">
                            <div class="group-master-index">
                                üëëÎ™®ÏûÑÏû•
                            </div>
                            <div class="group-master-name">
                                <!-- Ïù¥Î¶Ñ Î∂àÎü¨Ïò§Í∏∞ -->
                                <%= gatherData.leader_id %>
                            </div>
                        </div>

                        <% memberList.forEach((member, index)=>{ %>
                        <!-- Î™®ÏûÑÏõê Î∂àÎü¨Ïò§Í∏∞ -->
                        <div class="member-group">
                            <div class="group-member-index">
                                Î™®ÏûÑÏõê
                            </div>
                            <div class="group-member-name">
                                <!-- Ïù¥Î¶Ñ Î∂àÎü¨Ïò§Í∏∞ -->
                                <% if(member.mem_id == user.mem_id) { %>
                                    <span style="font-weight: 800;">
                                        <%= member.mem_id %>
                                        <a href='/gather/banMember?no=<%= gatherData.gathering_id %>&memId=<%= user.mem_id %>&mode=1' target="blankifr">[ÌÉàÌá¥]</a>
                                    </span>
                                <% } else { %>
                                    <%= member.mem_id %>
                                <% } %> 
                            </div>
                        </div>
                        <% }) %>
                    </div>
                </div>
                <% break; %>
            <% case 2: %>   
            Ïã†Ï≤≠Ìïú ÏÇ¨Îûå
            <% case 3: %> 
            Í±∞Ï†àÎãπÌïú ÏÇ¨Îûå
            <!-- Ïó¥ÎûåÏú†Ï†Ä = Ïã†Ï≤≠Ïûê -->
                <% if(typeof statusInfo != 'undefined' && statusInfo != ''){ %>
                <div class="view-user-applicant">
                    <div class="user-applicant">
                        <div class="user-applicant-cate">
                            <span class="title">Ïã†Ï≤≠ ÏÉÅÌÉú : </span>
                            <!-- ÏÉÅÌÉú Î∂àÎü¨Ïò§Í∏∞ -->
                            <% if(statusInfo.state==2){ %> 
                                <span class="status">ÏöîÏ≤≠Ï§ë</span>
                            <% } else { %>
                                <span class="status">Í±∞Ï†àÎê®</span>
                            <% } %>
                        </div>
                        <div class="user-applicant-cate">
                            <span class="title">Í∞ÄÏûÖ Ïã†Ï≤≠Ïùº : </span> 
                            <!-- Ïã†Ï≤≠Ïùº Î∂àÎü¨Ïò§Í∏∞ -->
                            <span class="status">
                                <%= statusInfo.updatedAt.toISOString().slice(0,10); %>
                            </span>
                        </div>
                        <!-- Ïã†Ï≤≠ Ï∑®ÏÜå Î∞ïÏä§ -->
                        <div class="cancel-btn-box">
                            <a href="/gather/banMember?no=<%= gatherData.gathering_id %>&memId=<%= user.mem_id %>&mode=2" target="blankifr">
                                <button>Ïã†Ï≤≠ Ï∑®ÏÜå</button>
                            </a>
                        </div>
                    </div>             
                </div>
                <% } %>
                <% break; %>
            <% default: %>
                <% break; %>
        <% } %>
        </div>
    </div>

    <iframe name="blankifr" style="display:none;"></iframe> 
    <!-- „Ñ¥ ÌôîÎ©¥ Î≥ÄÍ≤Ω Î∞©ÏßÄ -->
</section>