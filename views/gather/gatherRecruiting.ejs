<!-- STYLESHEET -->
<link rel="stylesheet" href="/css/gather/gatherRecruiting.css">

<!-- SECTION -->
<section>
    <div class="gather-section">
        <div class="gather-list">
            <div class="gather-main">
                <a href="/gather">밥모임</a>
            </div>
			<div class="gather-sub">
				<ul class="gather-sub-list">
					<li class="gather-sub-name">
						<span class="font-bold">
							<a href="/gather/recruiting?countperpage=9&gsort=0">모집중</a>
						</span>
					</li>
					<li class="gather-sub-name">
						<a href="/gather/completed?countperpage=9&gsort=1">모집완료</a>
					</li>
					<li class="gather-sub-name">
						<% if(typeof user == 'undefined'){ %>
							<a href="javascript:void(0)" onclick="alert('로그인 후에 이용하실 수 있습니다');">나의 밥모임</a>
						<% } else { %>
							<a href="/gather/mine">나의 밥모임</a>
						<% } %>
					</li>
				</ul>
			</div>
        </div>

        <div class="create-group-button">
			<a href="/gather/create">
				<button class="create-button">밥모임 만들기</button>
			</a>
        </div>

		<div class="gather-list-box">
			<% dataList.forEach((data, index)=>{ %>
				<div class="gather-content-box">
					<div class="group-image">
						<img src="/images/candy-blue.png">
					</div>
					<div class="group-name">
						<%= data.name %>
					</div>
					<div class="group-region">
						<span><%= data.region %></span>
					</div>
					<div class="numberndeadline">
						<div class="group-number">
							<div><%= data.currentHeadCount %>/<%= data.maximumHeadCount %> 명</div>
						</div>
						<div class="group-deadline">
							<div><%= data.deadline.toISOString().slice(5,7); %>월
								<%= data.deadline.toISOString().slice(8,10); %>일 모집 마감</div>
						</div>
					</div>
				</div>
			<% }) %>
        </div>
		
		<% if (dataList == ''){ %>
			<!-- <ul class="post-list"> -->
			<%= dataList.category %> 모집 중인 밥모임이 없어요. 한번 만들어보세요 :D
			<!-- </ul> -->
		<% } else { %>
			<div class="pagination-container">
				<% if (pagination.curSet > 1){ %>    
					<div class="prev-set-button"><a href="/gather/recruiting?pageno=<%= pagination.startPage-1%>&countperpage=9&gsort=0">&lt;&lt;&nbsp; </a></div>
				<% } %>
				<% if (pagination.pageNo!=1){ %>    
					<div class="prev-button"><a href="/gather/recruiting?pageno=<%= pagination.pageNo-1%>&countperpage=9&gsort=0">&nbsp;이전&nbsp;</a></div>
				<% } %>
				<div class="number-button-wrapper">
					<% for (var i=pagination.startPage; i < pagination.endPage+1; i++){ %>
						<span class="number-button"> 
							<% if (pagination.pageNo==i){ %>
								<% console.log(i, pagination.pageNo); %>
								<a href="/gather/recruiting?pageno=<%= i %>&countperpage=9&gsort=0" style="font-weight: 800;"><%= i %></a>
							<% } else{ %>
								<a href="/gather/recruiting?pageno=<%= i %>&countperpage=9&gsort=0"><%= i %></a>
							<% } %>
						</span>
					<% } %>
				</div>
				<% if (pagination.pageNo != pagination.totalPage){ %>
					<div class="next-button"><a href="/gather/recruiting?pageno=<%= pagination.pageNo+1%>&countperpage=9&gsort=0"> &nbsp;이후&nbsp;</a></div>
				<% }%>
				<% if (pagination.curSet < pagination.totalSet){ %>
					<div class="next-set-button"><a href="/gather/recruiting?pageno=<%= pagination.endPage+1%>&countperpage=9&gsort=0">&nbsp;&gt;&gt;</a></div>
				<% }%>
			</div>
		<% } %>
    </div>
</section>