<!-- STYLESHEET -->
<link rel="stylesheet" href="/css/gather/gatherJoined.css">

<!--SECTION-->
<section>

	<!-- 전체 틀 -->
    <div class="gather-section">

		<!-- 밥모임 카테고리 -->
        <div class="gather-list">
            <div class="gather-main">
                <a href="/gather">밥모임</a>
            </div>
			<div class="gather-sub">
				<ul class="gather-sub-list">
					<li class="gather-sub-name">
						<a href="/gather/recruiting?countperpage=9&gsort=0">모집중</a>
					</li>
					<li class="gather-sub-name">
						<a href="/gather/completed?countperpage=9&gsort=1">모집완료</a>
					</li>
					<li class="gather-sub-name">
						<span class="font-bold" style="font-weight: 800;">
							<% if(typeof user == 'undefined'){ %>
								<a href="javascript:void(0)" onclick="alert('로그인 후에 이용하실 수 있습니다');">나의 밥모임</a>
							<% } else { %>
								<a href="/gather/mine">나의 밥모임</a>
							<% } %>
						</span>
					</li>
				</ul>
			</div>
        </div>

		<!-- 내가 모임원  -->
		<div class="joined-box">

			<!-- 내가 참여한 모임 -->
			<div class="gathering-title">
				<span class="text"> 내가 참여한 모임 </span>
				<!-- <span class="more">
					<a href="/gather/joined?countperpage=9&gsort=1">[더보기]</a>
				</span> -->
			</div>

			<!-- 내가 참여한 모임이 없을 경우만 출력 -->
			<% if (typeof dataList == 'undefined' || dataList == ""){ %>
				<div class="no-gather">
					참여 중인 모임이 없어요!
				</div>

			<!-- 내가 참여한 모임이 있을 경우만 -->
			<% } else { %>
				<div class="gather-joined-box">
					<% dataList.forEach((data, index)=>{ %>
						<!-- 리스트 내용 불러오기 -->
						<div class="joined-list-index">
							<div class="joined-index-name">
								<!-- 해당 밥모임 view 페이지로 이동 -->
								<a href="/gather/view?no=<%=data.gathering_id%>">
									<%= data.name %>
								</a>
							</div>
							<div class="joined-index-btn">
								<span class="joined-block-btn">▼</span>
								<span class="joined-none-btn">▲</span>
							</div>
						</div>
						<div class="joined-contents-none">
							<!-- 정보 불러오기 -->
							<div class="joined-content">
								<div class="joined-master">
									👑모임장 : 
									<span><%= data.leader_id %></span>
								</div>
								<div class="joined-region">
									모임 지역 : 
									<span>
										<%= data.city%>
										<%= data.district? data.district: ''%>
										<%= data.neighborhood?data.neighborhood: ''%>
									</span>
								</div>
								
								<div class="joined-spot">
									함께 할 맛집 : 
									<span><%= data.place %></span>
								</div>

								<div class="joined-numbers">
									모임 인원수 (현재 / 총원) : 
									<span>
										<%= data.currentHeadCount %> / <%= data.maximumHeadCount %>
									</span>
								</div>
						
								<div class="joined-deadline">
									모집 마감일 : 
									<span>
										<%= data.createdAt.toISOString().slice(0,4) %>년
										<%= data.createdAt.toISOString().slice(5,7) %>월
										<%= data.createdAt.toISOString().slice(8,10) %>일
									</span>
								</div>

								<div class="joined-intro">
									<div class="joined-intro-title">
										소개글 : 
									</div>
									<div class="joined-intro-text">
										<%= data.description %>
									</div>
								</div>
							</div>

							<div class="joined-gochat">
								<form action="/gather/chat/room" method="get">
									<input type="text" name="roomId" value="<%= data.gathering_id %>" hidden>
									<input type="text" name="name" value="<%= data.name %>"hidden>
									<button type="submit">입장하기</button>
								</form>
							</div>
					
						</div>
					<% }) %>
				</div>
			<% } %>
		</div>
		
    </div>
	
</section>